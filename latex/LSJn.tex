\documentclass[11pt, openany]{article}
%\usepackage{pstricks,pstricks-add,pst-math,pst-xkey}
\usepackage[frenchb]{babel}
%\usepackage{slashbox}
\usepackage{graphicx}
\usepackage{amsmath,amssymb,amstext}
\usepackage[latin1]{inputenc}
\usepackage[OT1]{fontenc}
%\usepackage{fancybox}
\usepackage{a4wide}
%\usepackage{fancyvrb}
%\usepackage{pgf,tikz}
%\usetikzlibrary{arrows}
\usepackage{amsthm} %pour les théorèmes sans numéro


\newcounter{moncompteur}
\newtheorem{q}[moncompteur]{ \textbf{Question}}{}
\newtheorem{prop}[moncompteur]{ \textbf{Proposition}}{}
\newtheorem{df}[moncompteur]{ \textbf{Définition}}{}
\newtheorem{rem}[moncompteur]{ \textbf{Remarque}}{}
\newtheorem{theo}[moncompteur]{ \textbf{Théorème}}{}
\newtheorem*{theo*}{ \textbf{Théorème}}{}
\newtheorem{conj}[moncompteur]{ \textbf{Conjecture}}{}
\newtheorem{cor}[moncompteur]{ \textbf{Corollaire}}{}
\newtheorem{lm}[moncompteur]{ \textbf{Lemme}}{}
\newtheorem*{lm*}{ \textbf{Lemme}}{}
%\newtheorem{nota}[moncompteur]{ \textbf{Notation}}{}
%\newtheorem{conv}[moncompteur]{ \textbf{Convention}}{}
\newtheorem{exa}[moncompteur]{ \textbf{Exemple}}{}
\newtheorem{ex}[moncompteur]{ \textbf{Exercice}}{}
%\newtheorem{app}[moncompteur]{ \textbf{Application}}{}
%\newtheorem{prog}[moncompteur]{ \textbf{Algorithme}}{}
%\newtheorem{hyp}[moncompteur]{ \textbf{Hypothèse}}{}
\newenvironment{dem}{\noindent\textbf{Preuve}\\}{\flushright$\blacksquare$\\}
%\newcommand{\cg }{[\kern-0.15em [}
%\newcommand{\cd}{]\kern-0.15em]}
\newcommand{\R}{\mathbb{R}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\U}{\mathbb{U}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\card}{\mathrm{card}}

%TIPE
%\usepackage{multicol}
%\usepackage[cm]{fullpage}
%\usepackage{xcolor}
%\newcommand{\A}{A^*}
%\newcommand{\Aa}{A^+}
%\newcommand{\ouv}{( \thickspace}
%\newcommand{\fer}{\thickspace )}
%\newcommand{\KAp}{K \langle A \rangle}
%\newcommand{\KAs}{K \langle \langle A \rangle \rangle}
%\newcommand{\sig}{\boldsymbol\sigma}
%\newcommand{\pig}{\boldsymbol\pi}
%\newcommand{\Sig}{\boldsymbol\sigma^{*}}
%\newcommand{\1}{\boldsymbol\varepsilon}
%\newcommand{\epsi}{\varepsilon}
%\newcommand{\lie}{\mathfrak{L}}
%\newcommand{\bwt}{\textnormal{bwt}}
%\newcommand{\bwts}{\textnormal{bwts}}
%\newcommand{\esp}{\textvisiblespace}
%\newcommand{\demo}{\noindent\textit{Démonstration} }


%stage
\newcommand{\s}{\sigma}
\newcommand{\Sig}{\mathfrak S}
\newcommand{\G}{\Gamma}
\newcommand{\D}{\Delta}
\newcommand{\Th}{\Theta}
\newcommand{\Gp}{\Gamma}
\newcommand{\Dp}{\Delta}
\newcommand{\Gt}{\widetilde\Gamma}
\newcommand{\Dt}{\widetilde\Delta}
\newcommand{\LSJ}{$\mathbf{LSJ}$}
\newcommand{\LSJn}{$\mathbf{LSJ'}$}
\newcommand{\surj}{
%\mathrm{surj}
%\boldsymbol
\Phi
}
\newcommand{\To}{\Rightarrow}
\newcommand{\forget}{\mathsf{forget}}

\usepackage{bussproofs}
\EnableBpAbbreviations



\usepackage{mathrsfs}

\bibliographystyle{ieeetr}  

\begin{document}
\renewcommand{\labelitemi}{$\diamond$}
\vspace{2cm}~~\\




définition formule

\section{Le calcul \LSJ}

L'article \cite{LSJ} définit un calcul de séquents \LSJ. Une sémantique naturelle des séquents est définie à l'aide des modèles de Kripke, mais nous ne la présentons pas. En effet, ce qui nous intéresse est l'existence, pour toute formule, d'un séquent qui est prouvable dans le calcul \LSJ\ si, et seulement si, la formule est prouvable en logique intuitionniste. Nous renvoyons à l'article pour les démonstrations, notamment celle de la complétude du calcul.

\subsection{Les séquents}

On s'intéresse à des \emph{multiensembles}, c'est-à-dire des collections où le nombre d'occurrence est pris en compte, mais non l'ordre des éléments. Cela permettra de ne pas avoir besoin de règles explicites d'échange.

Un \textbf{séquent} est la donnée de trois multiensembles $\Th$, $\G$ et $\D$ de formules ; on écrit alors $\Th\;;\;\G\;\To\;\D$.

Une définition d'un séquent \textbf{réfutable} est donnée dans l'article à l'aide des modèles de Kripke. Nous ne la détaillons pas ici, car ce qui nous intéresse surtout est la propriété suivante qui en découle, démontrée dans l'article. La définition de \textbf{prouvable} sera donnée plus tard car elle est liée aux règles du calcul, mais ceci illustre son intérêt.
\begin{prop}\label{propSignificationSequent}
%Soit $\G$, $\D$ des multiensembles de formules. Le séquent $\emptyset\;;\;\G\;\To\;\D$ est \textbf{prouvable} dans \LSJ, c'est-à-dire non réfutable, si et seulement si la formule $\bigwedge_{A\in\G}A\,\to\,\bigvee_{B\in\D}B$ est valide en logique intuitionniste.
Un séquent $\emptyset\;;\;\G\;\To\;\D$ est \textbf{réfutable} si, et seulement si, la formule $\bigwedge_{A\in\G}A\,\to\,\bigvee_{B\in\D}B$ n'est pas valide en logique intuitionniste. Un séquent est \textbf{prouvable} dans \LSJ\ si, et seulement si, il n'est pas réfutable.

\end{prop}
\begin{cor}
Soit $A$ une formule, elle est valide en logique intuitionniste si et seulement si le séquent $\emptyset;\emptyset\To A$ est  prouvable dans \LSJ.
\end{cor}

Les multiensembles $\G$ et $\D$, et leur signification dans la propriété \ref{propSignificationSequent} sont des éléments habituels en calcul des séquents. En revanche, $\Th$ est propre à \LSJ, et est difficile à interpréter car contrairement au cas où $\Th$ est vide, un séquent avec $\Th$ quelconque ne peut pas être représenté par une formule. Ce qu'on peut dire est que $\Th$ représente des formules gardées en réserve, non visibles directement dans le séquent (les formules de $\Th$ ne peuvent pas être formule principale), mais qui peuvent être transférées dans $\G$ et devenir visibles. On verra que les seules règles qui agissent sur $\Th$ sont celles qui concernent le connecteur $\to$.

Pour un séquent $\Th\;;\;\G\;\To\;\D$, on appellera les formules de $\G$ les \textbf{formules de gauche}, celles de $\D$ les \textbf{formules de droite}, et celles de $\Th$ les \textbf{formules de réserve} du séquent (appellations non conventionnelles).

%

\subsection{Les règles}

\def\regle{
\def\defaultHypSeparation{\hskip .05in}
	\AXC	{$prem_{1}$}
	\AXC	{...}
	\AXC	{$prem_{p}$}
	\RightLabel{$(\mathcal R)$}
	\TIC{$concl$}
	\DP
}
\def\instance{
\def\defaultHypSeparation{\hskip .05in}
	\AXC	{$\s_{1}$}
	\AXC	{...}
	\AXC	{$\s_{p}$}
	\RightLabel{$(\mathcal R)$}
	\TIC{$\s$}
	\DP
}
\def\instanceAx{
\centerAlignProof
	\AXC	{\qquad}
	\RightLabel{$(\mathcal A)$}
	\UIC{$\s$}
	\DP
}


\def\botL{
	\AXC	{}
	\RightLabel{$\bot L$}
	\UIC{$\Th\,; \bot, \G \To \D$}
	\DP
}
\def\Id{
	\AXC	{}
	\RightLabel{$\mathrm{Id}$}
	\UIC{$\Th\,; A,\G \To A,\D$}
	\DP
}
\def\etL{
	\AXC{$\Th\,; A, B,\G \To \D$}
	\RightLabel{$\land L$}
	\UIC{$\Th\,; A\land B,\G \To  \D$}
	\DP
}
\def\etR{
	\AXC{$\Th\,; \G \To A,\D$}
	\AXC{$\Th\,; \G \To B,\D$}
	\RightLabel{$\land R$}
	\BIC{$\Th\,; \G \To A\land B,\D$}
	\DP
}
\def\ouL{
	\AXC{$\Th\,; A,\G \To \D$}
	\AXC{$\Th\,; B,\G \To \D$}
	\RightLabel{$\lor L$}
	\BIC{$\Th\,; A\lor B,\G \To \D$}
	\DP
}
\def\ouR{
	\AXC{$\Th\,; \G \To A,B,\D$}
	\RightLabel{$\lor R$}
	\UIC{$\Th\,; \G \To A\lor B,\D$}
	\DP
}
\def\impL{
	\AXC{$\Th\,; B,\G \To \D$}
	\AXC{$B,\Th\,; \G \To A,\D$}
	\AXC{$B\,; \Th,\G \To A$}
	\RightLabel{$\to L$}
	\TIC{$\Th\,; A\to B,\G \To \D$}
	\DP
}
\def\impR{
	\AXC{$\Th\,; A,\G \To B,\D$}
	\AXC{$\emptyset\,; A,\Th,\G \To B$}
	\RightLabel{$\to R$}
	\BIC{$\Th\,; \G \To A\to B,\D$}
	\DP
}

%Une règle est de la forme\regle où $\mathcal R$ est le nom de la règle, et $prem_{1}$, ... , $prem_{p}$, $concl$ décrivent des séquents d'une certaine forme. Par exemple $\Th\;;\;A\lor B,\G\;\To\;\D$ représente n'importe quel séquent où au moins une des formules de gauche est une disjonction, et si $\Th\;;\;A,\G\;\To\;\D$ se trouve dans la même règle, cela représente un séquent obtenu à partir du précédent en rempla\c cant une disjonction de gauche $A\lor B$ par son premier terme $A$.



Les règles du calcul \LSJ\ sont données dans la figure~\ref{fig:reglesLSJ}. La notation $A,\G$ représente le multiensemble obtenu à partir de $\G$ en ajoutant une occurrence de $A$. Pour une règle \regle, $\mathcal R$ est le nom de la règle, $prem_{1}$, ... , $prem_{p}$ sont les (resp. première, ... , $p$-ième) \textbf{prémisses}, et $concl$ la \textbf{conclusion}. Les \textbf{axiomes} sont les règles sans prémisse. Pour toutes les autres règles, une unique formule apparaît de manière explicite dans la conclusion : c'est la \textbf{formule principale}. Les règles dites de gauche, ou d'introduction à gauche, contenant un $L$ dans leur nom, sont celles où la formule principale se trouve à gauche dans la conclusion, de même pour les règles de droite.

\begin{figure}
\centering

$$\begin{array}{cc}
	\botL & \Id \\\\
	\etL & \etR \\\\
	\ouL & \ouR \\\\
	\multicolumn{2}{c}{\impL}\\\\
	\multicolumn{2}{c}{\impR}
\end{array}$$

\caption{Les règles du calcul \LSJ}
\label{fig:reglesLSJ}
\end{figure}


Une \textbf{instance} d'une règle $\mathcal R$ a la même forme que la règle : \instance, mais ici les $\s_{i}$ et $\s$ sont des séquents connus explicitement ; bien entendu il faut qu'il s'agisse de séquents qui ont bien la forme donnée par la définition de la règle. Par exemple \etL\ devient une instance de la règle $\land L$ (qui a la même écriture que la règle) lorsqu'on connaît les formules $A$ et $B$ et toutes les formules de $\Th$, $\G$, $\D$.

Une \textbf{preuve} est un arbre dont les n\oe uds sont étiquetés par un séquent et une règle et ont la même arité que le nombre de prémisses de la règle, et tel que : pour tout n\oe ud de séquent $\s$ et règle $\mathcal R$, si $\s_{1}$, ... , $\s_{p}$ sont les séquents associés à chacun de ses fils respectivement, alors \instance\ est une instance de $\mathcal R$. Les feuilles d'un tel arbre sont les n\oe uds auxquels est associé un axiome.

Un séquent est \textbf{prouvable} s'il existe une preuve à la racine de laquelle il est associé.

De manière équivalente, on peut définir l'ensemble des formules prouvables comme le plus petit ensemble vérifiant : pour toute instance \instance\ d'une règle de \LSJ, si pour tout $i$, $\s_{i}$ est prouvable, alors $\s$ est prouvable (en particulier pour toute instance \instanceAx\ d'un axiome $\mathcal A$, $\s$ est prouvable).



\subsection{Conditions de non-prouvabilité}

Pour montrer qu'un séquent est prouvable, il suffit d'en exhiber une preuve. Comment montrer le contraire ? D'après la définition précédente, un séquent n'est pas prouvable s'il n'existe aucune instance de règle\instance telle que tous les $\s_{i}$ sont prouvables. Or les $\s_{i}$ ne dépendent que de $\s$, $\mathcal R$ et du choix de la formule principale : il est donc possible de tester toutes les instances possibles. Cela fournit un premier algorithme de recherche de preuve : récursivement, pour chercher si un séquent $\s$ est prouvable, on considère toutes les instances de règles dont $\s$ est la conclusion et pour chacune on détermine récursivement si chaque prémisse est prouvable. Si on trouve une instance telle que toutes les prémisses sont prouvables, alors $\s$ est prouvable (et on obtient une preuve de $\s$ si on connaît une preuve de chacune de ces prémisses), sinon $\s$ n'est pas prouvable. Cet algorithme est très long. En fait, c'est à peu près ce qu'on se retrouve à faire dans les cas extrêmement défavorables. Mais heureusement, on a un procédé bien plus économe en moyenne grâce à la notion de règle ou prémisse inversible.

Une prémisse $prem_{i}$ d'une règle\regle(aussi appelée $i$-ème prémisse de $\mathcal R$) est \textbf{inversible} si on a : si $prem_{i}$ est non prouvable, alors $concl$ est non prouvable. Une règle est \textbf{inversible} si toutes ses prémisses sont inversibles.

On admet, une démonstration se trouvant dans l'article \cite{LSJ} :

\noindent- les règles $\land L$, $\land R$, $\lor L$ et $\lor R$ sont inversibles~;

\noindent- les deux premières prémisses de $\to L$ et la première prémisse de $\to R$ sont inversibles~;

\noindent- la troisième prémisse de $\to L$ et la deuxième prémisse de $\to R$ ne sont pas inversibles.



\subsection{Algorithme}

\begin{figure}[!h]
%\centering
\def\true{\emph{vrai}}
\def\false{\emph{faux}}
\def\lett{\textbf{soit }}
\def\if{\textbf{si} }
\def\then{\textbf{alors} }
\def\return{\textbf{retourner} }
\def\select{\textbf{sélectionner} }
\def\from{\textbf{dans} }

\textbf{fonction} estProuvable ($\s$)

\quad \lett $\s=\Th;\G\To\D$

\quad \if ($\bot\in\G$) \then \return \true

\quad \if ($\G\cap\D\neq\emptyset$) \then \return \true

\quad \if ($\G$ et $\D$ ne contiennent que des formules \emph{atomiques}) \then \return \false


\quad \if (il existe $A\land B\in\G$) \then $\{$

\quad \quad \select $H=A\land B$ \from $\G$

\quad \quad \return estProuvable($prem(\land L, \s, H)$)

\quad $\}$


\quad \if (il existe $A\lor B\in\D$) \then $\{$

\quad \quad \select $H=A\lor B$ \from $\D$

\quad \quad \return estProuvable($prem(\lor R, \s, H)$)

\quad $\}$


\caption{Algorithme}
\label{fig:algo}
\end{figure}



\subsection{?}



définitions de l'article, pseudo-code

définitions : instance, formule principale


\

\


\def\instance{
\def\defaultHypSeparation{\hskip .05in}
	\AXC	{$\s_{1}$}
	\AXC	{...}
	\AXC	{$\s_{p}$}
	\TIC{$\s$}
	\DP
}

\def\instancedeux{
\def\defaultHypSeparation{\hskip .05in}
	\AXC	{$\s_{1}$}
	\AXC	{$\s_{2}$}
	\BIC{$\s$}
	\DP
}


On voit immédiatement que l'algorithme nécessite de pouvoir déduire d'un séquent, d'une règle et d'une formule principale contenue dans le séquent et sur laquelle la règle peut agir, les séquents correspondant aux différentes prémisses. Ce n'est pas difficile : pour les axiomes il n'y a rien à faire ; pour les autres règles, la formule principale $H$ étant de la forme $A \text{ 'connecteur' } B$, il suffit d'enlever $H$ du séquent et, selon le connecteur et le côté où se trouvait $H$, d'ajouter $A$ ou $B$ à $\Th$, $\G$, $\D$ ou nulle part.

Mais ce n'est pas tout. Lorsqu'on essaie d'appliquer une règle\instancedeux\ au séquent $\s$, on lance une recherche de preuve sur $\s_{1}$ qu'on a obtenu comme décrit ci-dessus. Si on obtient que $\s_{1}$ est prouvable, on lance alors la recherche de preuve sur $\s_{2}$. On doit donc déterminer $\s_{2}$. On a vu qu'on sait le faire à partir de $\s$. Une solution consiste donc à retenir $\s$ pendant qu'on effectue la recherche de preuve sur $\s_{1}$, mais cela peut être coûteux en mémoire. Une autre solution, que nous avons privilégiée, consiste à être capable de retrouver $\s$ à partir de $\s_{1}$ ainsi que de la formule principale, de la règle et du numéro de la prémisse (ici $1$). On a dans ce cas besoin de pouvoir retrouver la conclusion à partir de n'importe laquelle des prémisses, pas seulement par exemple de la première prémisse pour une règle qui n'en a que deux. En effet, utiliser $\s_{1}$ pour retrouver $\s$ suppose qu'à la fin de la recherche de preuve pour $\s_{1}$, on connaît $\s_{1}$. Or, l'idée ici est de n'avoir vraiment qu'un seul séquent en mémoire à tout moment. Ainsi, à la fin de la recherche de preuve pour $\s$, on doit connaître $\s$, donc on doit aussi pouvoir déduire $\s$ de $\s_{2}$ en connaissant la formule principale et le fait qu'on est en train de s'intéresser à la deuxième prémisse.

En résumé, on aimerait (bien que ce ne soit pas nécessaire) que toutes les règles soient \textbf{locales}, avec la définition suivante.

\begin{df}
Une règle est \textbf{locale} si pour toute instance\instance\ de cette règle et pour tout $i$ entre $1$ et $p$, on peut déduire $\s$ à partir de $\s_{i}$ et de la formule principale et de $i$.
\end{df}

On remarque que $\land L$, $\land R$, $\lor L$ et $\lor R$ sont locales. Les axiomes sont également locaux, la définition n'ayant pas grand intérêt pour eux. En revanche, les règles $\to L$ et $\to R$ ne sont pas locales : pour chacune, les formules représentées par $\D$ dans la conclusion n'apparaissent nulle part dans la dernière prémisse, il n'est donc pas possible de retrouver la conclusion en connaissant uniquement cette prémisse, la formule principale et le numéro de la prémisse, puisqu'il n'y a aucun moyen d'en déduire ce qui se trouve dans $\D$.

C'est pour cette raison qu'on introduit le calcul \LSJn, dans lequel toutes les règles sont locales.

\section{Le calcul \LSJn}


%On utilise les définitions et notations de l'article~\cite{LSJ}.
%.
%
%\
%
%Le système \LSJn\ a pour objectif de faire les mêmes calculs que \LSJ, mais en manipulant des séquents qui contiennent un peu plus d'information, afin de pouvoir faire le ``back-tracking'' nécessaire à l'algorithme de \LSJ\ en n'ayant à tout moment en mémoire qu'un seul séquent.
%
%Pour cela, on veut que les séquents de \LSJn\ représentent de manière exhaustive et pertinente ceux de \LSJ\ : on montre qu'il existe une surjection de l'ensemble des séquents de \LSJn\ dans l'ensemble des séquents de \LSJ, telle qu'un séquent de \LSJn\ est prouvable dans \LSJn\ si, et seulement si, son image est prouvable dans \LSJ.
%
%\
%
%Le calcul \LSJn, très proche du calcul \LSJ, manipule des séquents contenant un peu plus d'information afin de n'avoir que des règles locales. 
%Plus précisément, chaque séquent de \LSJn\ a un indice (un entier naturel), et chaque formule du séquent a également un indice.
%Plus précisément, chaque séquent a un indice $n$, qui détermine lesquelles de ses formules, qui ont aussi chacune un indice $i$, sont \emph{actives}, c'est-à-dire peuvent être la formule principale lors d'une application de règle : pour les formules de gauche, la condition est $i\leq n$, et pour celles de droite $i=n$. Ainsi, pour la dernière prémisse des deux règles liées à $\to$ par exemple, les formules de droite de la conclusion peuvent être conservée dans le séquent sans être actives. Il suffit de modifier l'indice du séquent pour changer les formules actives.

Le calcul \LSJn\ est très proche du calcul \LSJ\ : chaque règle de \LSJn\ correspond à une règle de \LSJ, et des arbres de preuve dans les deux systèmes pour la même formule sont fortement liés. Mais contrairement à \LSJ, les règles de \LSJn\ sont toutes locales. Pour cela, les séquents de \LSJn\ représentent chacun un séquent de \LSJ, avec un peu plus d'informations : celles qui sont parfois nécessaire pour retrouver la conclusion à partir d'une prémisse. Cette représentation est exhaustive et correcte. On montre en effet qu'il existe une surjection de l'ensemble des séquents de \LSJn\ dans l'ensemble des séquents de \LSJ, telle qu'un séquent de \LSJn\ est prouvable dans \LSJn\ si, et seulement si, son image est prouvable dans \LSJ.


\subsection{Formalisme de \LSJn}


Un séquent de \LSJn\ est la donnée de deux multiensembles $\Gp$ et $\Dp$ de couples $entier~:~formule$, et d'un entier naturel $n$, tels que tous les entiers présents dans $\Gp$ sont $\leq n+1$ et tous ceux présents dans $\Dp$ sont $\leq n$ ; on écrit $\Gp \Rightarrow_{n} \Dp$.

\

Les règles du calcul \LSJn\ sont décrite dans la figure~\ref{fig:reglesLSJn}. Chacune correspond à une règle de \LSJ.

\

\def\botL{
	\AXC	{}
	\RightLabel{$\bot L'$}
	\UIC{$i:\bot, \Gp \To_{n} \Dp$}
	\DP
}
\def\Id{
	\AXC	{}
	\RightLabel{$\mathrm{Id}'$}
	\UIC{$i:A,\Gp \To_{n} n:A,\Dp$}
	\DP
}
\def\etL{
	\AXC{$i:A,i:B,\Gp \To_{n} \Dp$}
	\RightLabel{$\land L'$}
	\UIC{$i:A\land B,\Gp \To_{n} \Dp$}
	\DP
}
\def\etR{
	\AXC{$\Gp \To_{n} n:A,\Dp$}
	\AXC{$\Gp \To_{n} n:B,\Dp$}
	\RightLabel{$\land R'$}
	\BIC{$\Gp \To_{n} n:A\land B,\Dp$}
	\DP
}
\def\ouL{
	\AXC{$i:A,\Gp \To_{n} \Dp$}
	\AXC{$i:B,\Gp \To_{n} \Dp$}
	\RightLabel{$\lor L'$}
	\BIC{$i:A\lor B,\Gp \To_{n} \Dp$}
	\DP
}
\def\ouR{
	\AXC{$\Gp \To_{n} n:A,n:B,\Dp$}
	\RightLabel{$\lor R'$}
	\UIC{$\Gp \To_{n} n:A\lor B,\Dp$}
	\DP
}
\def\impL{
	\AXC{$i:B,\Gp \To_{n} \Dp$}
	\AXC{$n+1:B,\Gp \To_{n} n:A,\Dp$}
	\AXC{$n+2:B,\Gp \To_{n+1} n+1:A, \Dp$}
	\RightLabel{$\to L'$}
	\TIC{$i:A\to B,\Gp \To_{n} \Dp$}
	\DP
}
\def\impR{
	\AXC{$0:A,\Gp \To_{n} n:B,\Dp$}
	\AXC{$0:A,\Gp \To_{n+1} n+1:B, \Dp$}
	\RightLabel{$\to R'$}
	\BIC{$\Gp \To_{n} n:A\to B,\Dp$}
	\DP
}



\begin{figure}
\centering

\emph{$n$ et parfois $i$ désignent toujours des entiers naturels, avec $i\leq n$}
$$\begin{array}{cc}
	\botL & \Id \\\\
	\etL & \etR \\\\
	\ouL & \ouR \\\\
	\multicolumn{2}{c}{\impL}\\\\
	\multicolumn{2}{c}{\impR}
\end{array}$$

\caption{Les règles du calcul \LSJn}
\label{fig:reglesLSJn}
\end{figure}




\subsection{\'Equivalence avec \LSJ}


On note $\Sig$ l'ensemble des séquents de \LSJ, et $\Sig'$ l'ensemble des séquents de \LSJn.

Soit $\sigma\in\Sig$, on note $\vdash\sigma$ si $\sigma$ est prouvable dans \LSJ\ ; soit $\sigma'\in\Sig'$, on note $\vdash'\sigma'$ si $\sigma'$ est prouvable dans \LSJn.

\

Soit $M$ un multiensemble de couples $entier:formule$, l'entier d'un couple étant appelé son indice. On note $M_{k}$ le multiensemble obtenu à partir de $M$ en ne gardant que les couples d'indice $k$, et $M_{\leq k}$ celui obtenu en ne gardant que les couples d'indice inférieur à $k$. On note $\forget(M)$ le multiensemble de formules obtenu en oubliant l'indice et ne gardant que la formule de chaque couple de $M$.

On définit l'application $\surj$ de %l'ensemble des séquents de \LSJn\ dans l'ensemble des séquents de \LSJ,
$\Sig'$ dans $\Sig$, qui à $\G' \To_{n} \D'$ associe $\Th\, ;\G \To \D$ %\quad 

\noindent
où :\;
$\left\{
\begin{array}{l}
%	\Th = \{ A \:|\: n+1:A \in \G'\} \\
%	\G = \{ A \:|\: \exists i\leq n,\ i:A \in \G'\} \\
%	\D = \{ A \:|\: n:A \in \D'\}
	\Th = \forget (\G'_{n+1}) \\
	\G = \forget (\G'_{\leq n}) \\
	\D = \forget (\D'_{n})
\end{array}
\right.$.

C'est une application surjective : en effet tout séquent $\Th \,;\G\To\D$ de \LSJ\ a au moins pour antécédent le séquent $\G' \To_{0} \D'$, 
%avec $\G' = \{ 0:A \:|\: A \in \G\} \cup \{ 1:A \:|\: A \in \Th\}$ et $\D' = \{ 0:A \:|\: A \in \D\}$.
où $\G'$ est l'union de $0 : \G$ (le multiensemble de couples obtenu à partir de $\G$ en rempla\c cant chaque occurrence d'une formule $A$ par une occurrence du couple $0:A$) avec $1:\Th$, et où $\D'=0:\D$.

\



\def\instanceR{
\def\defaultHypSeparation{\hskip .05in}
	\AXC	{$\s_{1}$}
	\AXC	{...}
	\AXC	{$\s_{p}$}
	\RightLabel{$(\mathcal R)$}
	\TIC{$\s$}
	\DP
}
\def\instanceRp{
\def\defaultHypSeparation{\hskip .05in}
	\AXC	{$\s'_{1}$}
	\AXC	{...}
	\AXC	{$\s'_{p}$}
	\RightLabel{$(\mathcal R')$}
	\TIC{$\s'$}
	\DP
}
\def\instanceAx{
\centerAlignProof
	\AXC	{\qquad}
	\RightLabel{$(\mathcal A)$}
	\UIC{$\s$}
	\DP
}
\def\instanceAxp{
\centerAlignProof
	\AXC	{\qquad}
	\RightLabel{$(\mathcal A')$}
	\UIC{$\s'$}
	\DP
}
\def\instanceId{
\centerAlignProof
	\AXC	{\qquad}
	\RightLabel{(Id)}
	\UIC{$\s$}
	\DP
}
\def\instanceIdp{
\centerAlignProof
	\AXC	{\qquad}
	\RightLabel{(Id$'$)}
	\UIC{$\s'$}
	\DP
}
\def\instanceetR{
\def\defaultHypSeparation{\hskip .05in}
	\AXC	{$\s_{1}$}
	\AXC	{$\s_{2}$}
	\RightLabel{$(\land R)$}
	\BIC{$\s$}
	\DP
}
\def\instanceetRp{
\def\defaultHypSeparation{\hskip .05in}
	\AXC	{$\s'_{1}$}
	\AXC	{$\s'_{2}$}
	\RightLabel{($\land R'$)}
	\BIC{$\s'$}
	\DP
}
\def\instanceimpL{
\def\defaultHypSeparation{\hskip .in}
	\AXC	{$\s_{1}$}
	\AXC	{$\s_{2}$}
	\AXC	{$\s_{3}$}
	\RightLabel{($\to L$)}
	\TIC{$\s$}
	\DP
}
\def\instanceimpLp{
\def\defaultHypSeparation{\hskip .in}
	\AXC	{$\s'_{1}$}
	\AXC	{$\s'_{2}$}
	\AXC	{$\s'_{3}$}
	\RightLabel{($\to L'$)}
	\TIC{$\s'$}
	\DP
}


Soit $\mathcal R$ une règle de \LSJ. On note $\mathcal R'$ la règle de \LSJn\ qui lui correspond. On écrit \instanceR\ et \instanceRp\ des instances de ces règles.


\begin{lm}
Soit $\sigma\in\Sig$ et $\sigma'\in\Sig'$ tels que $\sigma=\surj(\sigma')$ et soit $\mathcal R$ une règle de \LSJ.

1) Si \instanceR alors il existe $\s'_{1}$, ... , $\s'_{p}$ tels que pour tout $k$, $\s_{k} = \surj (\s'_{k})$, et \instanceRp.

2) Si \instanceRp, posons pour tout $k$, $\s_{k} = \surj (\s'_{k})$, alors \instanceR.

\noindent
Pour un axiome $\mathcal A$, cela signifie simplement : \instanceAx si et seulement si \instanceAxp.
\end{lm}

\begin{dem}
On le montre pour chaque règle ; c'est une conséquence assez directe de la définition de $\surj$. Faisons-le par exemple pour Id, $\land R$ et $\to L$. \`A chaque fois, on se donne $\s = \Th\, ;\G \To \D$ et $\s' = \G' \To_{n} \D' \in\Sig'$ tels que $\s=\surj(\s')$.

\

%\noindent-\quad 
\noindent Id :\quad On a\instanceId\ si et seulement s'il existe une formule $A$ appartenant à la fois à $\G$ et $\D$, ce qui équivaut, par définition de $\surj$, à : il existe $A$ et $i\leq n$ tels que $n:A\in\D'$ et $i:A\in\G'$, c'est-à-dire \instanceIdp.

\

\noindent $\land R$ :	\quad

1) Si \instanceetR\ alors il existe des formules $A$ et $B$ et un multiensemble $\Dt$ tels que $\D = A \land B, \Dt$ et $\s_{1} = \Th\, ;\G \To A,\Dt$ et $\s_{2} = \Th\, ;\G \To B,\Dt$.
 Posons $\Dt' = \D' - n:A \land B$ le multiensemble obtenu en retirant une seule occurrence de $n:A\land B$ à $\D'$ (qui contient cet élément parce que $\D$ contient $A\land B$ et par définition de $\surj$),
 et $\s'_{1} = \G' \To_{n} n:A,\Dt'$ et $\s'_{2} = \G' \To_{n} n:B,\Dt'$.
 Alors on a bien $\s_{1}=\surj(\s'_{1})$ et $\s_{2}=\surj(\s'_{2})$ (en remarquant que 
 %$\Dt = \{ C \:|\: n:C \in \Dt'\}$
$\Dt = \forget (\Dt'_{n})$
), et \instanceetRp (en remarquant que $\s' = \G' \To_{n} n:A \land B,\Dt'$).

2) Si \instanceetRp\ alors il existe $A$, $B$ et $\Dt'$ tels que $\D' = n:A \land B, \Dt'$ et $\s'_{1} = \G' \To_{n} n:A,\Dt'$ et $\s'_{2} = \G' \To_{n} n:B,\Dt'$ ; 
 on pose $\Dt = \D - A \land B$ le multiensemble obtenu en retirant une seule occurrence de $A\land B$ à $\D$,
 et $\s_{1}=\surj(\s'_{1})$ et $\s_{2}=\surj(\s'_{2})$ ; on obtient $\s = \Th\, ;\G \To A\land B,\Dt$ et $\s_{1} = \Th\, ;\G \To A,\Dt$ et $\s_{2} = \Th\, ;\G \To B,\Dt$\; d'où\instanceetR.

\

\noindent $\to L$ :	\quad

1) Si \instanceimpL\ alors il existe $A$, $B$ et $\Gt$ tels que $\G=A\to B,\Gt$ et $\s_{1} = \Th\, ;B,\Gt \To \D$ et $\s_{2} = B,\Th\, ;\Gt \To A,\D$ et $\s_{3} = B \,; \Th,\Gt \To A$ ; et il existe $i\leq n$ tel que $i:A\to B\in\G'$ ;
 on pose $\Gt' = \G' - i:A\to B$ (on retire une seule occurrence de $i:A\to B$ de $\G'$) et $\s'_{1} = i:B,\Gt' \To_{n} \D'$ et $\s'_{2} = n+1:B,\Gt' \To_{n} n:A,\D'$ et $\s'_{3} = n+2:B,\Gt' \To_{n+1} n+1:A, \D'$ et on vérifie que cela convient.

2) Si \instanceimpLp\ alors il existe $i$, $A$, $B$ et $\Gt'$ tels que $\G'=i:A\to B,\Gt'$ et $\s'_{1}$, $\s'_{2}$ et $\s'_{3}$ ont la forme donnée ci-dessus ; on pose $\Gt = \G - A\to B$ (on retire une seule occurrence de $A\to B$ de $\G$), alors les images $\s_{1}$, $\s_{2}$ et $\s_{3}$ par $\surj$ de $\s'_{1}$, $\s'_{2}$ et $\s'_{3}$ respectivement s'écrivent comme ci-dessus et donc \instanceimpL.
\end{dem}



\begin{theo}
Soit $\sigma\in\Sig$ et $\sigma'\in\Sig'$ tels que $\sigma=\surj(\sigma')$, alors $\vdash \sigma$ si et seulement si $\vdash' \sigma'$.
%Soit $\sigma$ un séquent de \LSJ\ et $\sigma'$ un séquent de \LSJn\ tels que $\sigma=\surj(\sigma')$, alors $\vdash \sigma$ si et seulement si $\vdash' \sigma'$.
\end{theo}

\begin{dem}
Par récurrence sur la \emph{taille} de $\s\in\Sig$, c'est-à-dire la somme des tailles des formules des trois multiensembles apparaissant dans $\s$.

\

\noindent
On initialise pour tout $\sigma = \Th\, ;\G \To \D$ tel que toutes les formules dans $\G$ et dans $\D$ sont atomiques : soit $\sigma' = \G' \To_{n} \D' \in\Sig'$ tel que $\sigma=\surj(\sigma')$. Alors toutes les formules associées à un $i \leq n$ dans $\G'$ et toutes les formules associées à $n$ dans $\D'$ sont aussi atomiques. En étudiant la forme des conclusions des règles non axiomatiques de \LSJ\ comme de \LSJn,
on remarque que si $\s$ (resp. $\s'$) est la conclusion d'une règle de \LSJ\ (resp. \LSJn), alors la règle est un axiome. L'initialisation est donc un cas particulier de ce qui suit avec $p=0$ (ce qui entraîne qu'on n'utilise en fait pas l'hypothèse de récurrence).

% on obtient que : $\vdash \s$ si et seulement si $\s$ est une conséquence directe d'un axiome de \LSJ, et $\vdash' \s'$ si et seulement si $\s'$ est une conséquence directe d'un axiome de \LSJn. Or d'après le lemme, pour $\mathcal A$ axiome de \LSJ, \instanceAx si et seulement si \instanceAxp. On en déduit $\vdash \sigma$ si et seulement si $\vdash' \sigma'$.

\

\noindent
Soit $\s = \Th\, ;\G \To \D \in\Sig$. Soit $\sigma' = \G' \To_{n} \D' \in\Sig'$ tel que $\sigma=\surj(\sigma')$.

On suppose $\vdash \s$. Alors il existe une règle $\mathcal R$ de \LSJ\ et $\s_{1}$, ... , $\s_{p} \in\Sig$ (avec éventuellement $p$ nul) tels que $\vdash \s_{k}$ pour tout $k$ et\instanceR. D'après le lemme, il existe $\s'_{1}$, ... , $\s'_{p} \in\Sig'$ tels que $\s_{k}=\surj(\s'_{k})$ pour tout $k$ et\instanceRp. Pour tout $k$, on applique l'hypothèse de récurrence à $\s_{k}$ qui a une \emph{taille} strictement inférieure à celle de $\s$, et on obtient $\vdash' \s'_{k}$. On en déduit $\vdash' \s'$.

On suppose $\vdash' \s'$. Alors il existe une règle $\mathcal R'$ de \LSJn\ et $\s'_{1}$, ... , $\s'_{p} \in\Sig'$ tels que $\vdash' \s'_{k}$ pour tout $k$ et\instanceRp. On pose $\s_{k}=\surj(\s'_{k})$ pour tout $k$. D'après le lemme on a \instanceR, en particulier on peut appliquer l'hypothèse de récurrence aux $\s_{k}$ donc $\vdash \s_{k}$ pour tout $k$, d'où $\vdash \s$.

\end{dem}






\section{Efficacité de \LSJ}


L'étude qui suit porte sur le calcul \LSJ. En effet, \LSJn\ hérite de toutes les propriétés intéressantes de \LSJ, en apportant une localité des règles qui facilite une implémentation économe en mémoire.


\subsection{Propriété de la sous-formule et indexation}

$B$ est une \textbf{sous-formule} de $A$ si $B=A$ ou si $A$ est de la forme $A_{1}$`connecteur'$A_{2}$ et ($B$ est une sous-formule de $A_{1}$ ou $B$ est une sous-formules de $A_{2}$). Un calcul de séquents vérifie la \textbf{propriété de la sous-formule} si tout séquent prouvable $\s$ admet une preuve telle que toute formule apparaissant dans (un séquent de) la preuve est une sous-formule d'une formule de $\s$. En particulier, le séquent $\To A$ a une preuve dans laquelle toute formule est une sous-formule de $A$.

Le calcul \LSJ vérifie la propriété de la sous-formule : on le constate aisément en observant chaque règle.

La propriété de la sous-formule est très recherchée en calcul des séquents. D'une part, elle donne une borne sur les formules qu'il faudra manipuler au cours d'une recherche de preuve, qui sont évidemment toutes plus petites que la formule qu'on essaie de prouver. Mais surtout, elle permet de connaître à l'avance la liste exhaustive des formules qu'on pourra rencontrer. On peut donc à l'avance les numéroter : ainsi, les formules d'un séquents sont simplement représentées par un entier. Il faut quelques informations sur ces numéros : par exemple pour une formule $A\land B$, il faut savoir qu'il s'agit d'un ``et'', et pouvoir déterminer $A$ et $B$. Il faut aussi pouvoir reconnaître quand l'axiome Id (une même formule apparaît des deux côtés du séquent) s'applique : pour cela on associe à chaque formule une classe, qui correspond à une classe d'équivalence de la relation d'égalité structurelle. La taille de toutes ces informations réunies est linéaire en la taille de la formule de départ (c'est-à-dire le nombre de n\oe uds de l'arbre qui la représente, qui est aussi le nombre de sous-formules avec multiplicité). Un exemple est donné par la figure~\ref{fig:indexation}.

La propriété de la sous-formule est encore plus intéressante dans le cadre de la recherche de preuve compilée : connaître à l'avance les formules qui apparaîtront permet d'écrire pour chacune des fonctions agissant sur le séquent, au lieu de les calculer au cours de la recherche de preuve (voir ??).

\begin{figure}
%\centering
\includegraphics[width=0.3\linewidth]{indexation} %Quelques_formules.f12
\caption{Indexation de la formule $(a\land b)\land(\lnot c \lor (a\land b))$}
\label{fig:indexation}
\end{figure}

\subsection{Absence de duplication}


\

\
\subsection{Inversibilité de certaines prémisses de $\to L$ et $\to R$}


$((\bigwedge_{i=1}^{n}p_{i} \lor (\lnot\lnot p_{1}\to f) \lor \bigvee_{i=2}^{n}(p_{i}\to f))\to f)\to f$

\

$(\;[ \;(p_{1}\land p_{2} \land ... \land p_{n}) \lor (\lnot\lnot p_{1}\to f) \lor (p_{2}\to f) \lor ... \lor (p_{n}\to f)\;]\to f\;)\to f$

\

$1:f \quad\To_{0}\quad 0:  p1 \land ( p2 \land p3 )  \;,\; 0: \lnot\lnot p1 \to f  \;,\;  0: p2 \to f  \;,\;  0: p3 \to f  \;,\; 0: f$

\

$f\;;\;\emptyset \quad\To\quad p_{1} \land p_{2} \land ... \land p_{n} \;,\; \lnot\lnot p_{1}\to f \;,\; p_{2}\to f \;,\; ...  \;,\; p_{n}\to f \;,\; f$












\bibliographystyle{plain}
\bibliography{LSJn}

\end{document}












